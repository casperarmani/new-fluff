INFO:     Will watch for changes in these directories: ['/home/runner/GeminiVideoBot']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [11017] using statreload
INFO:app:Redis client initialized successfully
INFO:     Started server process [11032]
INFO:uvicorn.error:Started server process [11032]
INFO:     Waiting for application startup.
INFO:uvicorn.error:Waiting for application startup.
INFO:redis_config:Successfully connected to Redis
INFO:     Application startup complete.
INFO:uvicorn.error:Application startup complete.
INFO:     172.31.196.76:49938 - "GET / HTTP/1.1" 200 OK
INFO:     172.31.196.76:49938 - "GET / HTTP/1.1" 200 OK
INFO:     172.31.196.76:49938 - "GET /static/styles.css HTTP/1.1" 200 OK
INFO:     172.31.196.76:49938 - "GET /auth_status HTTP/1.1" 200 OK
INFO:     172.31.196.76:49938 - "GET /login HTTP/1.1" 200 OK
INFO:     172.31.196.76:49938 - "GET /auth_status HTTP/1.1" 200 OK
INFO:redis_config:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843 from Redis cache
INFO:redis_config:Redis get_session_history time: 1.12 seconds
INFO:app:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:app:Total chat history processing time: 1.12 seconds
INFO:     172.31.196.76:49938 - "GET /chat_history HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/video_analysis_output?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=10 "HTTP/1.1 200 OK"
INFO:app:Retrieved video analysis history for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:app:Total video analysis history processing time: 1.08 seconds
INFO:     172.31.196.76:49954 - "GET /video_analysis_history HTTP/1.1" 200 OK
INFO:     172.31.196.76:46392 - "GET / HTTP/1.1" 200 OK
INFO:     172.31.196.76:46392 - "GET /auth_status HTTP/1.1" 200 OK
INFO:redis_config:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843 from Redis cache
INFO:redis_config:Redis get_session_history time: 1.14 seconds
INFO:app:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:app:Total chat history processing time: 1.14 seconds
INFO:     172.31.196.76:46392 - "GET /chat_history HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/video_analysis_output?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=10 "HTTP/1.1 200 OK"
INFO:app:Retrieved video analysis history for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:app:Total video analysis history processing time: 1.00 seconds
INFO:     172.31.196.76:46394 - "GET /video_analysis_history HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
INFO:redis_config:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843 from Redis cache
INFO:redis_config:Redis get_session_history time: 1.12 seconds
INFO:chatbot:Session history processing time: 15.24 seconds
INFO:chatbot:Gemini API call time: 1.15 seconds
INFO:chatbot:Total message processing time: 16.38 seconds
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history "HTTP/1.1 201 Created"
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history "HTTP/1.1 201 Created"
INFO:redis_config:Redis update_chat_history time: 1.28 seconds
INFO:redis_config:Redis update_chat_history time: 1.29 seconds
INFO:app:Total send_message processing time: 22.51 seconds
INFO:     172.31.196.76:49758 - "POST /send_message HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/video_analysis_output?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=10 "HTTP/1.1 200 OK"
INFO:app:Retrieved video analysis history for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:app:Total video analysis history processing time: 0.80 seconds
INFO:     172.31.196.76:49758 - "GET /video_analysis_history HTTP/1.1" 200 OK
INFO:redis_config:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843 from Redis cache
INFO:redis_config:Redis get_session_history time: 1.08 seconds
INFO:app:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:app:Total chat history processing time: 1.08 seconds
INFO:     172.31.196.76:59506 - "GET /chat_history HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
INFO:redis_config:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843 from Redis cache
INFO:redis_config:Redis get_session_history time: 1.10 seconds
INFO:chatbot:Session history processing time: 12.97 seconds
INFO:chatbot:Gemini API call time: 3.29 seconds
INFO:chatbot:Total message processing time: 16.26 seconds
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history "HTTP/1.1 201 Created"
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history "HTTP/1.1 201 Created"
INFO:redis_config:Redis update_chat_history time: 1.53 seconds
INFO:redis_config:Redis update_chat_history time: 1.36 seconds
INFO:app:Total send_message processing time: 23.12 seconds
INFO:     172.31.196.76:54590 - "POST /send_message HTTP/1.1" 200 OK
INFO:redis_config:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843 from Redis cache
INFO:redis_config:Redis get_session_history time: 1.08 seconds
INFO:app:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:app:Total chat history processing time: 1.08 seconds
INFO:     172.31.196.76:54590 - "GET /chat_history HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/video_analysis_output?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=10 "HTTP/1.1 200 OK"
INFO:app:Retrieved video analysis history for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:app:Total video analysis history processing time: 0.75 seconds
INFO:     172.31.196.76:59820 - "GET /video_analysis_history HTTP/1.1" 200 OK