INFO:     Will watch for changes in these directories: ['/home/runner/GeminiVideoBot']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [3841] using statreload
INFO:     Started server process [3854]
INFO:uvicorn.error:Started server process [3854]
INFO:     Waiting for application startup.
INFO:uvicorn.error:Waiting for application startup.
INFO:app:Redis client initialized successINFO:redis_config:Successfully connected to Redis
INFO:app:Redis connection test passed
INFO:     Application startup complete.
INFO:uvicorn.error:Application startup complete.
INFO:     172.31.196.31:40538 - "GET / HTTP/1.1" 200 OK
INFO:     172.31.196.31:40538 - "GET /auth_status HTTP/1.1" 200 OK
ERROR:redis_config:Error getting cache: object bytes can't be used in 'await' expression
ERROR:redis_config:Error getting cache: object bytes can't be used in 'await' expression
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=50 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/video_analysis_output?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=10 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:database:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843 from database
INFO:     172.31.196.31:40538 - "GET /chat_history HTTP/1.1" 200 OK
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:database:Retrieved video analysis history for user e5fb9299-3a16-4453-9586-2735c521d843 from database
INFO:     172.31.196.31:40548 - "GET /video_analysis_history HTTP/1.1" 200 OK
INFO:     172.31.196.31:39382 - "GET / HTTP/1.1" 200 OK
INFO:     172.31.196.31:39382 - "GET /static/styles.css HTTP/1.1" 200 OK
INFO:     172.31.196.31:39382 - "GET /auth_status HTTP/1.1" 200 OK
INFO:     172.31.196.31:39382 - "GET /login HTTP/1.1" 200 OK
INFO:     172.31.196.31:46966 - "GET / HTTP/1.1" 200 OK
INFO:     172.31.196.31:46966 - "GET /auth_status HTTP/1.1" 200 OK
ERROR:redis_config:Error getting cache: object bytes can't be used in 'await' expression
ERROR:redis_config:Error getting cache: object bytes can't be used in 'await' expression
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/video_analysis_output?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=10 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=50 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:database:Retrieved video analysis history for user e5fb9299-3a16-4453-9586-2735c521d843 from database
INFO:     172.31.196.31:57562 - "GET /video_analysis_history HTTP/1.1" 200 OK
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:database:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843 from database
INFO:     172.31.196.31:46966 - "GET /chat_history HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:httpx:HTTP Request: POST https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history "HTTP/1.1 400 Bad Request"
ERROR:redis_config:Error in write-through cache: {'code': '22007', 'details': None, 'hint': None, 'message': 'invalid input syntax for type timestamp with time zone: "CURRENT_TIMESTAMP"'}
ERROR:redis_config:Error deleting cache: object int can't be used in 'await' expression
INFO:database:Successfully inserted chat message for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:httpx:HTTP Request: POST https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history "HTTP/1.1 400 Bad Request"
ERROR:redis_config:Error in write-through cache: {'code': '22007', 'details': None, 'hint': None, 'message': 'invalid input syntax for type timestamp with time zone: "CURRENT_TIMESTAMP"'}
ERROR:redis_config:Error deleting cache: object int can't be used in 'await' expression
INFO:database:Successfully inserted chat message for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:     172.31.196.31:53440 - "POST /send_message HTTP/1.1" 200 OK
ERROR:redis_config:Error getting cache: object NoneType can't be used in 'await' expression
ERROR:redis_config:Error getting cache: object bytes can't be used in 'await' expression
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=50 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:database:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843 from database
INFO:     172.31.196.31:53440 - "GET /chat_history HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/video_analysis_output?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=10 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:database:Retrieved video analysis history for user e5fb9299-3a16-4453-9586-2735c521d843 from database
INFO:     172.31.196.31:53446 - "GET /video_analysis_history HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:httpx:HTTP Request: POST https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history "HTTP/1.1 400 Bad Request"
ERROR:redis_config:Error in write-through cache: {'code': '22007', 'details': None, 'hint': None, 'message': 'invalid input syntax for type timestamp with time zone: "CURRENT_TIMESTAMP"'}
ERROR:redis_config:Error deleting cache: object int can't be used in 'await' expression
INFO:database:Successfully inserted chat message for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:httpx:HTTP Request: POST https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history "HTTP/1.1 400 Bad Request"
ERROR:redis_config:Error in write-through cache: {'code': '22007', 'details': None, 'hint': None, 'message': 'invalid input syntax for type timestamp with time zone: "CURRENT_TIMESTAMP"'}
ERROR:redis_config:Error deleting cache: object int can't be used in 'await' expression
INFO:database:Successfully inserted chat message for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:     172.31.196.31:58632 - "POST /send_message HTTP/1.1" 200 OK
ERROR:redis_config:Error getting cache: object NoneType can't be used in 'await' expression
ERROR:redis_config:Error getting cache: object bytes can't be used in 'await' expression
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=50 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:database:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843 from database
INFO:     172.31.196.31:58632 - "GET /chat_history HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/video_analysis_output?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=10 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:database:Retrieved video analysis history for user e5fb9299-3a16-4453-9586-2735c521d843 from database
INFO:     172.31.196.31:59640 - "GET /video_analysis_history HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:httpx:HTTP Request: POST https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history "HTTP/1.1 400 Bad Request"
ERROR:redis_config:Error in write-through cache: {'code': '22007', 'details': None, 'hint': None, 'message': 'invalid input syntax for type timestamp with time zone: "CURRENT_TIMESTAMP"'}
ERROR:redis_config:Error deleting cache: object int can't be used in 'await' expression
INFO:database:Successfully inserted chat message for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/users?select=id&id=eq.e5fb9299-3a16-4453-9586-2735c521d843 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:httpx:HTTP Request: POST https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history "HTTP/1.1 400 Bad Request"
ERROR:redis_config:Error in write-through cache: {'code': '22007', 'details': None, 'hint': None, 'message': 'invalid input syntax for type timestamp with time zone: "CURRENT_TIMESTAMP"'}
ERROR:redis_config:Error deleting cache: object int can't be used in 'await' expression
INFO:database:Successfully inserted chat message for user e5fb9299-3a16-4453-9586-2735c521d843
INFO:     172.31.196.31:43686 - "POST /send_message HTTP/1.1" 200 OK
ERROR:redis_config:Error getting cache: object NoneType can't be used in 'await' expression
ERROR:redis_config:Error getting cache: object bytes can't be used in 'await' expression
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/user_chat_history?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=50 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:database:Retrieved chat history for user e5fb9299-3a16-4453-9586-2735c521d843 from database
INFO:     172.31.196.31:43686 - "GET /chat_history HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://xghbfotsivdbuqvumyyu.supabase.co/rest/v1/video_analysis_output?select=%2A&user_id=eq.e5fb9299-3a16-4453-9586-2735c521d843&order=TIMESTAMP.desc&limit=10 "HTTP/1.1 200 OK"
ERROR:redis_config:Error setting cache: object bool can't be used in 'await' expression
INFO:database:Retrieved video analysis history for user e5fb9299-3a16-4453-9586-2735c521d843 from database
INFO:     172.31.196.31:40648 - "GET /video_analysis_history HTTP/1.1" 200 OK